<!DOCTYPE html>

{% extends 'base.html'%}
{% block content %}

<h1>Choose the best software for your purpose</h1>

<!-- table header -->
<div class="row">

	<div class="col s5">
		Title
	</div>
	<div class="col s2">
		Date published
	</div>
	<div class="col s2">
		Platform
	</div>
	<div class="col s1">
		Cost
	</div>
	<div class="col s1">
		Answers
	</div>
	<div class="col s1">
		chev+del
	</div>
</div>

<div class="row">
	<ul class="collapsible" data-collapsible="accordion">
		{% for topic in topics %}
		<li>
			<div class="collapsible-header">

				<div class="col s5">
					{{topic.title}}
				</div>
				<div class="col s2">
					Date published
				</div>
				<div class="col s2">
					{% for getos in topic.os %}
					{{ getos }}
					{% if not loop.last %}
					,
					{% endif %}
					{% endfor %}
				</div>
				<div class="col s1">
					{{topic.cost}}
				</div>
				<div class="col s1">
					{{ topic.answers }}
				</div>
				<div class="col s1">
					<i class="material-icons">expand_more</i>
				</div>
			</div>
			<div class="collapsible-body">
				<div class="row">
					<div class="col s11">
						{{topic.details}}
					</div>
					<div class="col s1">
						<a href="{{ url_for('delete_topic', topic_id=topic._id) }}"><i class="fas fa-trash-alt"></i></a>
						<a href="{{ url_for('edit_topic', topic_id=topic._id) }}"><i class="fas fa-edit"></i></a>
					</div>
				</div>
				<hr>
				{% for answer in answers %}
				{% if answer.topic == topic.title %}
				<div class="row">
					<div class="col s10">
						<p>{{answer.text}}</p>
						<p class="right-align">{{answer.name}}</p>
					</div>

					<div class="col s1">
						<i class="fas fa-thumbs-up"></i>
						{{answer.rating_pos}}
					</div>
					<div class="col s1">
						<i class="fas fa-thumbs-down"></i>
						{{answer.rating_neg}}
					</div>
				</div>
				<hr>
				{% endif %}
				{% endfor %}



				<form action="#" method="POST">
					<div id="comment-form">
						<div class="row">
							<div class="input-field col s12">
								<input id="comment_text" type="text" class="validate" name="comment_text">
								<label for="comment_text">Write your comment here</label>
							</div>
							<div class="input-field col s12">
								<input id="comment_name" type="text" class="validate" name="comment_name">
								<label for="comment_name">Your name (will be displayed below the comment)</label>
							</div>
						</div>
					</div>
					<div class="row">
                        <button class="btn" id="cancel-comment" type="button">Cancel              
                        </button>
						<button class="btn" name="action" id="submit-comment">Submit (dead)             
                        </button>
						<button class="btn" id="add-comment" type="button">New comment              
                        </button>
					</div>
				</form>
			</div>

		</li>
		{% endfor %}
	</ul>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">
	// Add comments functionality
	$("#add-comment").click(function(){
        $("#comment-form").animate({height: "200px"});
        $("#cancel-comment, #submit-comment, #comment-form").show();
        $("#add-comment").hide();
    });

    $("#cancel-comment").click(function(){
        $("#comment-form").animate({height: "0px"}, function(){$("#comment-form").hide()});
        $("#cancel-comment, #submit-comment").hide();
        
        $("#add-comment").show();
    });

</script>

{% endblock %}