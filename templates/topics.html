<!DOCTYPE html>

{% extends 'base.html'%}
{% block content %}

<h1>Choose the best software for your purpose</h1>

<!-- table header -->
<div class="row">

	<div class="col s5">
		Title
	</div>
	<div class="col s2">
		Date published
	</div>
	<div class="col s2">
		Platform
	</div>
	<div class="col s1">
		Cost
	</div>
	<div class="col s1">
		Answers
	</div>
	<div class="col s1">
		chev+del
	</div>
</div>

<div class="row">
	<ul class="collapsible" data-collapsible="accordion">
		{% for topic in topics %}
		<li>
			<div class="collapsible-header">
				<div class="col s5">
					<p>{{ topic.title }}</p>
                    <p class="right-align">{{ topic.author }}</p>
				</div>
				<div class="col s2">
					Date published
				</div>
				<div class="col s2">
					{% for getos in topic.os %}
					    {{ getos }}
					    {% if not loop.last %}
					        ,
					    {% endif %}
					{% endfor %}
				</div>
				<div class="col s1">
					{{topic.cost}}
				</div>
				<div class="col s1">
					{{ topic.answers }}
				</div>
				<div class="col s1">
					<i class="material-icons">expand_more</i>
				</div>

			</div>
			<div class="collapsible-body">
				<div class="row">
					<div class="col s11">
						{{topic.details}}
					</div>
					<div class="col s1">
						<a href="{{ url_for('delete_topic', topic_id=topic._id) }}"><i class="fas fa-trash-alt"></i></a>
						<a href="{{ url_for('edit_topic', topic_id=topic._id) }}"><i class="fas fa-edit"></i></a>
					</div>
				</div>
				<hr>

                <!-- Display the answer(s) -->
                {% for object in topic.comments %}
                	<div class="row">
					    <div class="col s10">
						    <p>{{ object.comment_text }}</p>
						    <p class="right-align">{{ object.comment_author }}</p>
					    </div>
					    <div class="col s1">
						    <i class="fas fa-thumbs-up"></i>
						    {{ object.comment_pos }}
					    </div>
					    <div class="col s1">
						    <i class="fas fa-thumbs-down"></i>
						    {{ object.comment_neg }}
					    </div>
				    </div>
                    <hr>
                {% endfor %}

                <!-- Input form for comments/answers -->
                <form action="{{ url_for('insert_comment', topic_id=topic._id) }}" method="POST">
					<div class="comment-form">
						<div class="row">
							<div class="input-field col s12">
                                Write your comment here
								<input type="text" class="validate" name="comment_text">
							</div>
							<div class="input-field col s12">
                                Your name (will be displayed below the comment)
								<input type="text" class="validate" name="comment_author">
							</div>
						</div>
					</div>
					<div class="row">
                        <button class="btn cancel-comment" type="button">Cancel              
                        </button>
						<button class="btn submit-comment" name="action">Submit             
                        </button>
						<button class="btn add-comment" type="button">New comment              
                        </button>
					</div>
				</form>
			</div>

		</li>
		{% endfor %}
	</ul>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
<script type="text/javascript">

	// Add commenting functionality
    $(".add-comment").click(function(){
        $(".comment-form").animate({height: "200px"});
        $(".cancel-comment, .submit-comment, .comment-form").show();
        $(".add-comment").hide();
    });
    $(".cancel-comment").click(function(){
        $(".comment-form").animate({height: "0px"}, function(){$(".comment-form").hide()});
        $(".cancel-comment, .submit-comment").hide();
        $(".add-comment").show();
    });
    $('.collapsible').click(function() {
        
        






    });


</script>

{% endblock %}