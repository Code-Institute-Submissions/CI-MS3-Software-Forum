<!DOCTYPE html>
<ul class="collapsible" data-collapsible="accordion">
    {% for topic in topics %}
    {% if loop.index < 11 %}
    <li>
        <div class="collapsible-header">
            <div class="row">
                <div class="col s12 l6">
                    <h5><i class="fas fa-caret-down"></i>{{ topic.title }}</h5>
                </div>
                <div class="col s4 l2">
                    {{ topic.publish_date.strftime('%d-%m-%Y') }}
                </div>
                <div class="col s4 l2">
                    {% for getos in topic.os %}
                    {{ getos }}
                    {% if not loop.last %}
                    ,
                    {% endif %}
                    {% endfor %}
                </div>
                <div class="col s2 l1">
                    {{ topic.cost }}
                </div>
                <div class="col s2 l1">
                    <div>{{ topic.comments|length }}</div>
                </div>
            </div>
        </div>
        <!-- collapsible body -->
        <div class="collapsible-body">
            <div class="row">
                <div class="comment-wrapper">
                    <p>{{ topic.details }}</p>
                    <p class="right-align topic-author"><em>{{ topic.author }}</em></p>
                </div>
                <div class="topic-btn-wrapper">
                    <a href="{{ url_for('delete_topic', topic_id=topic._id) }}" class="topic-action"><i class="material-icons">delete</i>Delete Topic</a>
                    <a href="{{ url_for('edit_topic', topic_id=topic._id) }}" class="topic-action"><i class="material-icons">edit</i>Edit Topic</a>
                </div>
            </div>
            <!-- Display the comment(s) -->
            <div class="row">
                <div class="col s12">
                    <h5>Comments:</h5>
                </div>
            </div>
            {% for object in topic.comments %}
            <div class="row">
                <div class="comment-wrapper">
                    <div class="comment-text">
                        {% if object.expired %}
                        <p><span class="em-red">Expired: </span>{{ object.comment_text }}</p>
                        {% else %}
                        <p>{{ object.comment_text }}</p>
                        {% endif %}
                        <p class="right-align"><em>{{ object.comment_author }}</em></p>
                    </div>
                </div>
                <div class="thumbs-field">
                    <div class="thumb-up" topic_id="{{ topic._id }}" loop_index="{{ loop.index }}"><i class="fas fa-thumbs-up"></i></div>
                    <p>{{ object.comment_pos }}</p>
                    <div class="thumb-down" topic_id="{{ topic._id }}" loop_index="{{ loop.index }}"><i class="fas fa-thumbs-down"></i></div>
                    <p>{{ object.comment_neg }}</p>
                </div>
            </div>
            {% endfor %}
            <!-- Input form for comments/answers -->
            <form action="{{ url_for('insert_comment', topic_id=topic._id) }}" method="POST">
                <div class="comment-form">
                    <div class="row">
                        <div class="input-field col s12">
                            Write your comment here
                            <input type="text" class="validate" name="comment_text">
                        </div>
                        <div class="input-field col s12">
                            Your name (will be displayed below the comment)
                            <input type="text" class="validate" name="comment_author">
                        </div>
                    </div>
                </div>
                <div class="row">
                    <button class="btn cancel-comment" type="button">Cancel              
                    </button>
                    <button class="btn submit-comment" name="action">Submit             
                    </button>
                    <button class="btn add-comment" type="button">New comment              
                    </button>
                </div>
            </form>
        </div>
    </li>
    {% else %}
        
            The filtered results contain more tha 10 items. Please specify your search to get less results.
        
    {% endif %}
    {% endfor %}
</ul>
Total results: {{ topics.count() }}
                    <a class="btn"
                        href="{{url_for('reset_filters')}}">
                    Reset filters
                    </a>
<script>$('.collapsible').collapsible();</script>